#############################################################################
# Makefile for building: win32client
# (originally generated by qmake, then hacked by jaf to compile win32client)
# (so if you don't like it, too bad)
#############################################################################

####### Compiler, tools and options

CC	=	bcc32
CXX	=	bcc32
CFLAGS	=	-O2 -x- -w -w-hid -v -D__MT__ #-DMUSCLE_ENABLE_ZLIB_ENCODING
CXXFLAGS=	-O2 -x- -w -w-hid -v -D__MT__ #-DMUSCLE_ENABLE_ZLIB_ENCODING
INCPATH	=	 -I"." -I".." -I"../regex/regex"
LINK	=	ilink32
LFLAGS	=	-ap -Gn -Gi -x -Tpe
LIBS	=	import32.lib cw32mti.lib
STARTUP =	c0x32.obj


####### Files

SOURCES =	..\..\muscle\test\win32client.cpp \
		..\..\muscle\iogateway\AbstractMessageIOGateway.cpp \
		..\..\muscle\iogateway\MessageIOGateway.cpp \
		..\..\muscle\message\Message.cpp \
		..\..\muscle\reflector\AbstractReflectSession.cpp \
		..\..\muscle\reflector\DumbReflectSession.cpp \
		..\..\muscle\reflector\StorageReflectSession.cpp \
		..\..\muscle\reflector\FilterSessionFactory.cpp \
		..\..\muscle\reflector\RateLimitSessionIOPolicy.cpp \
		..\..\muscle\reflector\ReflectServer.cpp \
		..\..\muscle\reflector\ServerComponent.cpp \
		..\..\muscle\regex\StringMatcher.cpp \
		..\..\muscle\regex\PathMatcher.cpp \
		..\..\muscle\regex\QueryFilter.cpp \
		..\..\muscle\regex\regex\regcomp.c \
		..\..\muscle\regex\regex\regerror.c \
		..\..\muscle\regex\regex\regexec.c \
		..\..\muscle\regex\regex\regfree.c \
		..\..\muscle\syslog\SysLog.cpp \
		..\..\muscle\system\GlobalMemoryAllocator.cpp \
		..\..\muscle\system\MessageTransceiverThread.cpp \
		..\..\muscle\system\Thread.cpp \
		..\..\muscle\system\SetupSystem.cpp \
		..\..\muscle\util\ByteBuffer.cpp \
		..\..\muscle\util\MemoryAllocator.cpp \
		..\..\muscle\util\MiscUtilityFunctions.cpp \
		..\..\muscle\util\NetworkUtilityFunctions.cpp \
		..\..\muscle\util\String.cpp \
		..\..\muscle\util\PulseNode.cpp

OBJECTS =	win32client.obj \
		AbstractMessageIOGateway.obj \
		MessageIOGateway.obj \
		Message.obj \
		AbstractReflectSession.obj \
		DumbReflectSession.obj \
		StorageReflectSession.obj \
		FilterSessionFactory.obj \
		RateLimitSessionIOPolicy.obj \
		ReflectServer.obj \
		ServerComponent.obj \
		StringMatcher.obj \
		PathMatcher.obj \
		QueryFilter.obj \
		regcomp.obj \
		regerror.obj \
		regexec.obj \
		regfree.obj \
		SysLog.obj \
		GlobalMemoryAllocator.obj \
		MessageTransceiverThread.obj \
		Thread.obj \
		SetupSystem.obj \
		ByteBuffer.obj \
		MemoryAllocator.obj \
		MiscUtilityFunctions.obj \
		NetworkUtilityFunctions.obj \
		String.obj \
		PulseNode.obj

TARGET	=	win32client.exe

####### Implicit rules

.SUFFIXES: .cpp .cxx .cc .c

.cpp.obj:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o$@ $<

####### Build rules

all:  $(TARGET)

$(TARGET): $(OBJECTS)
	$(LINK) $(LFLAGS) $(OBJECTS) $(LIBS) $(STARTUP)

#$(TARGET): $(OBJECTS)
#	$(LINK) @&&|
#	$(LFLAGS) $(OBJECTS) $(LIBS)
#|

#	$(LFLAGS) $(OBJECTS) $(TARGET),,$(LIBS)

clean:
	-del *.exe
	-del *.lib
	-del *.obj
	-del *.tds
	-del $(TARGET)

####### Compile

AbstractMessageIOGateway.obj: ..\..\muscle\iogateway\AbstractMessageIOGateway.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oAbstractMessageIOGateway.obj ..\..\muscle\iogateway\AbstractMessageIOGateway.cpp

MessageIOGateway.obj: ..\..\muscle\iogateway\MessageIOGateway.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oMessageIOGateway.obj ..\..\muscle\iogateway\MessageIOGateway.cpp

Message.obj: ..\..\muscle\message\Message.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oMessage.obj ..\..\muscle\message\Message.cpp

AbstractReflectSession.obj: ..\..\muscle\reflector\AbstractReflectSession.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oAbstractReflectSession.obj ..\..\muscle\reflector\AbstractReflectSession.cpp

DumbReflectSession.obj: ..\..\muscle\reflector\DumbReflectSession.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oDumbReflectSession.obj ..\..\muscle\reflector\DumbReflectSession.cpp

StorageReflectSession.obj: ..\..\muscle\reflector\StorageReflectSession.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oStorageReflectSession.obj ..\..\muscle\reflector\StorageReflectSession.cpp

FilterSessionFactory.obj: ..\..\muscle\reflector\FilterSessionFactory.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oFilterSessionFactory.obj ..\..\muscle\reflector\FilterSessionFactory.cpp

RateLimitSessionIOPolicy.obj: ..\..\muscle\reflector\RateLimitSessionIOPolicy.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oRateLimitSessionIOPolicy.obj ..\..\muscle\reflector\RateLimitSessionIOPolicy.cpp

ReflectServer.obj: ..\..\muscle\reflector\ReflectServer.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oReflectServer.obj ..\..\muscle\reflector\ReflectServer.cpp

ServerComponent.obj: ..\..\muscle\reflector\ServerComponent.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oServerComponent.obj ..\..\muscle\reflector\ServerComponent.cpp

StringMatcher.obj: ..\..\muscle\regex\StringMatcher.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oStringMatcher.obj ..\..\muscle\regex\StringMatcher.cpp

PathMatcher.obj: ..\..\muscle\regex\PathMatcher.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oPathMatcher.obj ..\..\muscle\regex\PathMatcher.cpp

QueryFilter.obj: ..\..\muscle\regex\QueryFilter.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oQueryFilter.obj ..\..\muscle\regex\QueryFilter.cpp

regcomp.obj: ..\..\muscle\regex\regex\regcomp.c
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oregcomp.obj ..\..\muscle\regex\regex\regcomp.c

regerror.obj: ..\..\muscle\regex\regex\regerror.c
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oregerror.obj ..\..\muscle\regex\regex\regerror.c

regexec.obj: ..\..\muscle\regex\regex\regexec.c
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oregexec.obj ..\..\muscle\regex\regex\regexec.c

regfree.obj: ..\..\muscle\regex\regex\regfree.c
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oregfree.obj ..\..\muscle\regex\regex\regfree.c

win32client.obj: ..\..\muscle\test\win32client.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -owin32client.obj ..\..\muscle\test\win32client.cpp

SysLog.obj: ..\..\muscle\syslog\SysLog.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oSysLog.obj ..\..\muscle\syslog\SysLog.cpp

GlobalMemoryAllocator.obj: ..\..\muscle\system\GlobalMemoryAllocator.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oGlobalMemoryAllocator.obj ..\..\muscle\system\GlobalMemoryAllocator.cpp

MessageTransceiverThread.obj: ..\..\muscle\system\MessageTransceiverThread.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oMessageTransceiverThread.obj ..\..\muscle\system\MessageTransceiverThread.cpp

Thread.obj: ..\..\muscle\system\Thread.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oThread.obj ..\..\muscle\system\Thread.cpp

SetupSystem.obj: ..\..\muscle\system\SetupSystem.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oSetupSystem.obj ..\..\muscle\system\SetupSystem.cpp

ByteBuffer.obj: ..\..\muscle\util\ByteBuffer.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oByteBuffer.obj ..\..\muscle\util\ByteBuffer.cpp

MemoryAllocator.obj: ..\..\muscle\util\MemoryAllocator.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oMemoryAllocator.obj ..\..\muscle\util\MemoryAllocator.cpp

MiscUtilityFunctions.obj: ..\..\muscle\util\MiscUtilityFunctions.cpp ..\..\muscle\util\string.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oMiscUtilityFunctions.obj ..\..\muscle\util\MiscUtilityFunctions.cpp

NetworkUtilityFunctions.obj: ..\..\muscle\util\NetworkUtilityFunctions.cpp ..\..\muscle\util\string.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oNetworkUtilityFunctions.obj ..\..\muscle\util\NetworkUtilityFunctions.cpp

String.obj: ..\..\muscle\util\String.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oString.obj ..\..\muscle\util\String.cpp

PulseNode.obj: ..\..\muscle\util\PulseNode.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -oPulseNode.obj ..\..\muscle\util\PulseNode.cpp
